---
title: "小白被 Linux 玩随便记录点东西"
published: 2025-11-28T16:30:00
description: '声明：本文有大量内容由 AI 生成，但是这些内容均经过验证（特殊标注除外）。 关闭动画 第一步：关闭 KDE 桌面本身的动画（窗口、菜单等） 这一步会让你的开始菜单、窗口最大化/最小化变得瞬间完成。 '
tags: [ 教程 ]
category: Blog
---

声明：本文有大量内容由 AI 生成，但是这些内容均经过验证（特殊标注除外）。

## 关闭动画

### 第一步：关闭 KDE 桌面本身的动画（窗口、菜单等）
这一步会让你的开始菜单、窗口最大化/最小化变得瞬间完成。

1.  打开 **系统设置 (System Settings)**。
2.  进入 **工作区行为 (Workspace Behavior)** -> **常规行为 (General Behavior)**。
3.  找到 **动画速度 (Animation speed)** 选项。
4.  将滑块一直拉到最右侧的 **“即时 (Instant)”**。
5.  点击应用。

> **效果：** 此时，KDE 的所有原生窗口、菜单弹出将不再有过渡动画。但这一步通常**不会**影响 QQ 或 Chrome 内部的网页滚动效果。

### 第二步：强制第三方应用（QQ、浏览器等）关闭动画
大多数现代 Linux 应用（包括 Linux 版 QQ、Chrome、Firefox）都是基于 GTK 或 Electron 开发的。它们并不直接读取 KDE 的动画设置，而是读取一个标准的 GTK 配置文件。我们需要手动创建这个配置来告诉它们“请勿播放动画”。

1.  打开你的终端（Konsole）。
2.  复制并运行以下命令（这是一条命令，直接复制粘贴回车即可）：

    ```bash
    mkdir -p ~/.config/gtk-3.0 ~/.config/gtk-4.0 && \
    echo -e "[Settings]\ngtk-enable-animations=0\ngtk-primary-button-warps-slider=0" | tee ~/.config/gtk-3.0/settings.ini ~/.config/gtk-4.0/settings.ini
    ```

    *如果命令执行后没有报错，就是成功了。*

> **原理说明：**
> *   `gtk-enable-animations=0`：这是核心。它告诉所有读取 GTK 配置的应用（包括 QQ、Chrome、Firefox）**全局禁用动画**。这通常会自动触发网页和应用内的“减少运动 (prefers-reduced-motion)”模式，从而关闭平滑滚动。
> *   `gtk-primary-button-warps-slider=0`（可选）：这会让滚动条点击行为变回“点击哪里跳到哪里”，而不是一页页翻，符合关闭动画后的干脆手感。

### 第三步：验证与后续
做完上述两步后，建议**注销并重新登录**（或者重启电脑）以确保所有后台进程（如 QQ 的后台服务）重新读取配置。

重启后：
*   **QQ / 微信 / 钉钉**：聊天列表滚动应该会变得生硬（瞬间跳转），不再平滑滚动。
*   **浏览器 (Chrome/Firefox)**：你可以访问 [prefers-reduced-motion 测试页面](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion) 来测试。如果显示 "Reduced motion preference is detected"，说明你的浏览器已经成功识别到了系统的“无动画”指令。

### 补充：如果某些应用依然有平滑滚动
如果极少数应用（例如纯 Qt 应用或特定版本的浏览器）依然有平滑滚动，你可以手动进行微调：

*   **Firefox**：在地址栏输入 `about:config`，搜索 `general.smoothScroll` 并双击设置为 `false`。
*   **Chrome/Edge**：在地址栏输入 `chrome://flags`，搜索 `Smooth Scrolling` 并设置为 `Disabled`。

大多数情况下，执行**前两步**就已经能达到你想要的效果了。

## 禁用 USB 鼠标唤醒
#### 找到鼠标的 ID

我们需要知道你鼠标独一无二的“身份证号”（Vendor ID 和 Product ID）。

1.  打开终端，输入：
    ```bash
    lsusb
    ```
2.  在输出列表中找到你的鼠标。它通常包含 "Mouse"、"Optical" 或品牌名（如 Logitech, Razer 等）。
    你会看到类似这样的一行：
    > Bus 001 Device 003: ID **046d:c077** Logitech, Inc. M105 Optical Mouse

    记下 `ID` 后面那两组字符。在这个例子中，Vendor ID 是 `046d`，Product ID 是 `c077`。**请记下你自己鼠标的这两个号码。**

---

#### 创建 Udev 规则

我们需要告诉 Linux 系统：“每当插入这个 ID 的设备时，自动把它的唤醒功能关掉。”

1.  创建规则文件：
    ```bash
    sudo nano /etc/udev/rules.d/50-disable-mouse-wake.rules
    ```

2.  粘贴以下内容（**注意修改为你自己的 ID**）：

    ```bash
    # 禁止特定鼠标唤醒电脑
    ACTION=="add", SUBSYSTEM=="usb", DRIVERS=="usb", ATTRS{idVendor}=="你的厂商ID", ATTRS{idProduct}=="你的产品ID", ATTR{power/wakeup}="disabled"
    ```

    **举例**：如果你的 ID 是 `046d:c077`，那么那一行应该是：
    `ACTION=="add", SUBSYSTEM=="usb", DRIVERS=="usb", ATTRS{idVendor}=="046d", ATTRS{idProduct}=="c077", ATTR{power/wakeup}="disabled"`

3.  保存并退出（Ctrl+O, Enter, Ctrl+X）。

---

#### 生效与测试

1.  **重载规则**：
    ```bash
    sudo udevadm control --reload
    ```
2.  **拔掉鼠标，重新插上**（这一步必须做，为了触发规则）。

---

#### 特殊情况说明

如果你的键盘和鼠标共用一个接收器，那可能分不开。

## Shebang

Shebang (`#!`) 是写在脚本文件**第一行**的一个特殊指令，用来告诉操作系统**“请用这个程序来运行我”**。

---

### 详细解释

**1. 它长什么样？**

Shebang 由井号（`#`）和感叹号（`!`）组成，后面紧跟着一个程序（解释器）的**绝对路径**。

*   **Bash 脚本:** `#!/bin/bash`
*   **Python 脚本:** `#!/usr/bin/python3`
*   **Node.js 脚本:** `#!/usr/bin/env node`

**2. 它是如何工作的？**

当你尝试像运行一个普通程序那样执行一个脚本文件时（例如，在终端里输入 `./myscript.sh`），操作系统会做以下事情：

*   它会检查文件的最开头。
*   如果它看到了 `#!` 这个标记，它就不会把这个文件当成普通的二进制程序来运行。
*   相反，它会读取 `#!` 后面的路径（比如 `/bin/bash`），然后启动这个程序。
*   最后，它会把你的脚本文件路径作为参数传递给那个程序去执行。

所以，运行一个第一行写着 `#!/bin/bash` 的脚本，就等同于在命令行手动输入 `bash ./myscript.sh`。

**3. 为什么它很重要？**

*   **指定正确的“语言”**： 脚本可以用很多种语言来写（Bash, Python, Perl 等）。Shebang 可以确保无论用户当前的环境是什么，你的脚本都会被正确的解释器执行，避免因语法不兼容而出错。
*   **让脚本能直接运行**： 有了 Shebang，你只需要给文件加上执行权限 (`chmod +x script.sh`)，就可以像运行一个内置命令一样直接通过 `./script.sh` 来执行它，非常方便。
*   **提高可移植性**： 尤其当使用 `#!/usr/bin/env python3` 这种形式时，它会自动在系统的环境变量 `PATH` 中寻找 `python3` 解释器，而不是写死一个固定的路径（比如 `/usr/bin/python3`）。这使得脚本在不同系统（这些系统中 python3 可能安装在不同位置）之间有更好的兼容性。

**总结**

Shebang 就像是给脚本文件贴上了一个“使用说明”，这个说明非常简洁，就是告诉操作系统该找谁（哪个解释器）来读懂并执行这个文件的内容。 它虽然看起来像一行注释，但对于操作系统来说，它是一条有特殊意义的指令。

## ssh 卡死

修改 `/etc/ssh/ssh_config` 添加以下参数：

```conf
ServerAliveInterval 10  # 每隔 10 秒发送一个请求
ServerAliveCountMax 3  # 允许超时的次数
```

## 睡眠模式改为 `deep`

#### 临时切换
```bash
sudo sh -c 'echo deep > /sys/power/mem_sleep'
```

#### 永久切换
编辑 `/etc/default/grub`，找到 `GRUB_CMDLINE_LINUX_DEFAULT` 这一行，在引号内部，添加 `mem_sleep_default=deep`。

修改前可能长这样：
```conf
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"
```

修改后应该长这样：
```conf
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash mem_sleep_default=deep"
```
然后执行

```bash
sudo update-grub
```

## 开机自动打开 NumLock

（可能仅适用于 Kubuntu）
1.  打开 **系统设置 (System Settings)**。
2.  在左侧菜单找到 **输入设备 (Input Devices)** -> **键盘 (Keyboard)**。
3.  在右侧点击 **硬件 (Hardware)** 选项卡。
4.  找到 **Plasma 启动时的 NumLock 状态 (NumLock on Plasma Startup)**。
5.  将其设置为 **开启 (Turn On)**。
6.  点击右下角的 **应用 (Apply)**。

## 开机自动登录时提示 `Unlock Login Keyring`

具体来讲，提示：
```
Authentication required
The login keyring did not get unlocked when you logged into your computer.
Password:
```

### 解决方法

因为之前折腾过 `lightdm`，系统里现在混用了 GNOME 的密钥环服务（所以提示语是 Login Keyring）。需要把这个密钥环的密码改成**空（Blank）**。

请按以下步骤操作，只需做一次：

#### 第一步：安装管理工具
Kubuntu 默认可能没有带 GNOME 的密钥管理工具，我们需要装一个叫 `seahorse` 的软件。
打开终端（Konsole），输入并回车：

```bash
sudo apt update
sudo apt install seahorse
```

#### 第二步：修改密钥环密码为空
1.  按 `Win` 键打开应用程序菜单，搜索 **"Passwords and Keys"** 或者 **"seahorse"** 并打开它。
2.  在左侧栏，你应该能看到 **"Login"**（或者叫“登录”）这一项。
3.  **右键点击 "Login"**，选择 **"Change Password"（更改密码）**。
4.  **旧密码：** 输入你现在的**用户登录密码**。
5.  **新密码：** **什么都不要输，直接留空！** 然后点继续。
6.  **确认新密码：** **再次留空**，直接点继续。
7.  系统会弹出一个警告说这样“不安全（Unsafe storage）”，点击 **"Continue"（继续）** 即可。

#### 第三步：重启电脑
重启之后，系统会自动登录，并且因为密钥环没有密码，它会自动解锁，就不会再弹窗烦你了。

---

**注意：**
这样做唯一的副作用是：如果你电脑借给别人用，他们打开你的浏览器就能看到保存的网站密码（因为不再需要密码解锁了）。既然你选择了自动登录，说明你在这台电脑上更看重方便而非极致的安全，所以这是标准解决方案。

## 双系统隐藏 grub

编辑 `/etc/default/grub`，将 `GRUB_DISABLE_OS_PROBER` 取消注释并改成 true。
然后执行
```bash
sudo update-grub
```

临时需要 grub时，开机长按 Shift 即可。

## 把登录界面改回 SDDM

```bash
sudo dpkg-reconfigure sddm
```

## NVIDIA GPU 突破 55W 功耗墙

启用 `nvidia-powerd.service`。

## 关闭临时 IPv6 地址

编辑 `/etc/sysctl.d/10-ipv6-privacy.conf`，将文件中的 `net.ipv6.conf.default.use_tempaddr = 2` 改为 `0`，然后执行：

```bash
sudo sysctl --system
```

## 关闭独显

```bash
sudo prime-select intel
```

## NVIDIA GPU 周期性卡顿

可能是轮询 `nvidia-smi` 干的。

## 利用 scp 传输文件

1、从服务器上下载文件
```
scp username@servername:/path/filename /var/www/local_dir（本地目录）
```

例如scp root@192.168.0.101:/var/www/test.txt  把192.168.0.101上的/var/www/test.txt 的文件下载到/var/www/local_dir（本地目录）

2、上传本地文件到服务器
```
scp /path/filename username@servername:/path
```

例如scp /var/www/test.php  root@192.168.0.101:/var/www/  把本机/var/www/目录下的test.php文件上传到192.168.0.101这台服务器上的/var/www/目录中

3、从服务器下载整个目录
```
scp -r username@servername:/var/www/remote_dir/（远程目录） /var/www/local_dir（本地目录）
```

例如:scp -r root@192.168.0.101:/var/www/test  /var/www/  

4、上传目录到服务器
```
scp -r local_dir username@servername:remote_dir
```

例如：scp -r test  root@192.168.0.101:/var/www/   把当前目录下的test目录上传到服务器的/var/www/ 目录

参考资料：https://www.cnblogs.com/jiangyao/archive/2011/01/26/1945570.html

## 微软大战代码 怎么不能鼠标中键选择矩形区域

在 Linux 系统下的 VS Code 中，鼠标中键无法直接进行矩形选择（列选择），通常是因为 **Linux 系统默认将“鼠标中键”定义为“粘贴选定内容”（Primary Selection Paste）**。这导致当你尝试用中键拖拽时，VS Code 可能会优先识别为粘贴操作，或者与系统的剪贴板功能发生冲突。

以下是几种解决方法，按推荐程度排序：

### 方法一：修改 VS Code 设置（最推荐）

你可以禁用 VS Code 中“中键点击粘贴”的功能，从而恢复中键用于矩形选择的功能。

1.  打开 VS Code 设置：按下 `Ctrl` + `,` 或者点击左下角齿轮图标 -> **Settings**。
2.  在搜索框中输入：`selectionClipboard`。
3.  找到 **Editor: Selection Clipboard** 选项。
4.  **取消勾选**该选项。

**效果：** 禁用后，在 VS Code 内点击鼠标中键不再执行粘贴操作，此时按住鼠标中键并拖动，即可实现矩形区域选择。

---

### 方法二：使用键盘+左键组合（通用替代方案）（未经验证）

如果你不想禁用中键粘贴功能，可以使用组合键来实现矩形选择。

*   **标准快捷键：** `Shift` + `Alt` + **鼠标左键拖拽**。

**注意（关于 Alt 键冲突）：**
在 Windows 上通常只按 `Alt` + 左键即可，但在 Linux（尤其是 GNOME 或 KDE 桌面环境）中，`Alt` + 鼠标左键通常被系统占用为“拖动窗口位置”。
*   所以，在 Linux 上必须多加一个 `Shift` 键（即 `Shift` + `Alt` + 鼠标左键）。
*   或者，你也可以去系统设置里把“移动窗口”的快捷键从 `Alt` 改为 `Super` (Windows键)，这样在 VS Code 里就可以直接用 `Alt` + 左键了。

---

### 方法三：切换“列选择模式”

如果你需要进行大量的矩形选择操作，可以将编辑器暂时切换为列选择模式。

1.  在顶部菜单栏选择 **Selection** (选择)。
2.  点击 **Column Selection Mode** (列选择模式)。
3.  此时，你直接使用**鼠标左键**拖拽，画出来的就是矩形选区。
4.  操作完成后，再次点击该菜单项取消模式。

**快捷键切换：** 通常并未绑定默认快捷键，但你可以去键盘快捷方式设置里搜索 `toggleColumnSelection` 自行绑定。

### 总结

*   **想恢复鼠标中键拖拽：** 请去设置里关闭 `Editor: Selection Clipboard`。
*   **想保留中键粘贴习惯：** 请使用 `Shift` + `Alt` + **鼠标左键**。

## 华硕笔记本的一些其他东西

安装 asusctl 和 supergfxctl。（官网https://asus-linux.org/）

由于 `asusctl` (现更名为 `asus-linux` 项目的一部分) 和 `supergfxctl` 官方主要支持 Fedora 和 Arch Linux，Kubuntu/Ubuntu 上没有官方维护的 PPA 源。因此，最稳妥且能用上最新功能的方法是**从源码编译安装**。

这个过程听起来复杂，但只要按顺序复制粘贴下面的命令即可完成。

### 准备工作

1.  **更新系统并安装基础依赖**
    打开终端，运行以下命令安装编译所需的工具库：
    ```bash
    sudo apt update
    sudo apt install -y build-essential git cmake pkg-config libclang-dev libudev-dev libpci-dev libseat-dev libsystemd-dev libglib2.0-dev libgtk-3-dev curl
    ```

2.  **安装 Rust 编程语言环境 (关键步骤)**
    Ubuntu 仓库里的 Rust 版本通常太旧，编译会报错，所以我们要用官方脚本安装最新版：
    ```bash
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    ```
    *   出现提示时，按 **`1`** (默认安装) 并回车。
    *   安装完成后，运行以下命令让环境变量立即生效：
    ```bash
    source "$HOME/.cargo/env"
    ```

---

### 第一步：安装 supergfxctl (显卡切换工具)

这是管理显卡切换的核心工具（必须先装它）。

1.  **克隆代码仓库**
    ```bash
    cd ~
    git clone https://gitlab.com/asus-linux/supergfxctl.git
    cd supergfxctl
    ```

2.  **编译并安装**
    ```bash
    make
    sudo make install
    ```

3.  **启动服务**
    ```bash
    sudo systemctl enable --now supergfxd.service
    ```
    *如果这一步报错，通常是因为没重启，暂时忽略，继续往下走。*

---

### 第二步：安装 asusctl (整机控制工具)

这是控制风扇、键盘灯、充电限制等功能的工具。

1.  **克隆代码仓库**
    ```bash
    cd ~
    git clone https://gitlab.com/asus-linux/asusctl.git
    cd asusctl
    ```

2.  **编译并安装**
    ```bash
    make
    sudo make install
    ```

3.  **设置 udev 规则 (非常重要)**
    为了让普通用户也能控制硬件，需要刷新一下规则：
    ```bash
    sudo udevadm control --reload-rules && sudo udevadm trigger
    ```

---

### 第三步：安装图形界面 (可选但推荐)

如果你不想每次都敲命令，可以安装 `rog-control-center`，这是一个图形化界面。

1.  **回到 asusctl 目录（如果你刚才退出了的话）**
    ```bash
    cd ~/asusctl
    ```
    *注意：rog-control-center 就在 asusctl 的源码包里，不需要单独下载。*

2.  **编译安装图形界面**
    ```bash
    make -C rog-control-center
    sudo make -C rog-control-center install
    ```

---

### 第四步：重启与验证

**现在，请重启你的电脑！**
```bash
reboot
```

重启回来后，进行以下测试：

1.  **检查服务状态**：
    ```bash
    systemctl status supergfxd
    ```
    应该显示绿色的 `active (running)`。

2.  **使用命令行切换显卡模式**：
    查看当前模式：
    ```bash
    supergfxctl -g
    ```
    切换到混合模式（推荐日常使用）：
    ```bash
    supergfxctl -m Hybrid
    ```
    切换到独显直连/高性能模式（玩游戏用）：
    ```bash
    supergfxctl -m AsusMuxDgpu
    ```
    *(注：切换模式后通常需要注销或重启用户会话)*

3.  **打开图形界面**：
    在程序菜单里搜索 **"ROG Control Center"** 并打开。你应该能在里面看到风扇曲线调整、键盘灯光设置以及充电限制（比如设为 80% 保护电池）。

### 常见问题解决
*   **报错 "Permission denied"**：如果你运行 `asusctl` 命令时提示权限不足，请确保你的用户在 `adm` 或 `users` 组里，或者直接使用 `sudo`。
*   **显卡模式切不过去**：确保你已经按照我之前的建议，将 Kubuntu 的电源模式设为 **Performance**，并且闭源的 NVIDIA 驱动已正确安装。

## 自动挂载非系统分区

在 Kubuntu (使用 KDE Plasma 桌面) 中，默认情况下确实不会自动挂载非系统分区。要解决这个问题，最简单的方法是使用 KDE 自带的设置，或者使用图形化工具来配置。

以下是三种方法，按推荐程度从高到低排列：

### 方法一：使用 KDE 系统设置 (最简单，无需修改系统文件)
如果你只是希望**登录后**自动挂载（不需要在开机未登录时就挂载），这是最安全的方法。

1. 打开 **系统设置 (System Settings)**。
2. 找到 **硬件 (Hardware)** -> **可移动存储 (Removable Storage)** -> **可移动设备 (Removable Devices)**。
   * *注意：虽然名字叫“可移动设备”，但通常也能管理内部的其他分区。*
3. 勾选 **“启用可移动介质的自动挂载” (Enable automatic mounting of removable media)**。
4. 在下方的列表中，找到你想要自动挂载的分区。
5. 勾选该分区右侧的 **“登录时自动挂载” (On Login)** 和 **“插入时自动挂载” (On Attach)**。
6. 点击 **应用 (Apply)**。

下次登录时，系统就会自动帮你“点”那一下，分区就挂载好了。

---

### 方法二：使用 KDE 分区管理器 (图形化配置，系统级挂载)（未经验证）
如果你希望它是**系统级挂载**（即开机后无论谁登录，分区都已经挂载好，且挂载路径固定），可以使用自带的工具。

1. 打开应用菜单，搜索并打开 **KDE 分区管理器 (KDE Partition Manager)** (需要输入密码)。
2. 在左侧选择包含该分区的硬盘。
3. 在右侧列表中，**右键点击**你要自动挂载的分区，选择 **编辑挂载点 (Edit Mount Point)**。
   * *注意：如果分区处于挂载状态，可能需要先卸载（右键 Unmount）。*
4. 在弹出的窗口中：
   * **路径 (Path)**：选择或输入一个固定的文件夹路径（例如 `/mnt/Data` 或 `/media/你的用户名/Data`）。如果不确定，可以保持默认或新建一个。
   * 勾选 **“如果无法挂载则不阻止系统启动” (Don't prevent system from booting if not mountable)** (这很重要，防止硬盘出问题时导致无法开机)。
5. 点击 **确定 (OK)**，然后点击工具栏左上角的 **应用 (Apply)** 按钮使更改生效。

---

### 方法三：使用 GNOME Disks (界面直观，适合新手)（未经验证）
很多 Kubuntu 用户觉得 KDE 自带的分区管理器设置不够直观，更喜欢用 GNOME 的磁盘工具。

1. 打开终端 (Konsole)，安装它：
   ```bash
   sudo apt update
   sudo apt install gnome-disk-utility
   ```
2. 打开应用菜单，搜索 **Disks (磁盘)** 并打开。
3. 在左侧选中你的硬盘，在右侧点击你要挂载的分区。
4. 点击分区条下方的 **齿轮图标**，选择 **编辑挂载选项 (Edit Mount Options)**。
5. 关闭 **“用户会话默认” (User Session Defaults)** 的开关。
6. 勾选 **“系统启动时挂载” (Mount at system startup)**。
7. 点击 **确定** 并输入密码。

---

**小提示：**
如果不小心配置错误导致开机无法进入桌面（进入了紧急模式），不要惊慌。只需要输入 `root` 密码，编辑 `/etc/fstab` 文件，把最后添加的那一行错误的挂载信息删除或注释掉（在行首加 `#`），保存重启即可。

## CPU 锁定 4.7 GHz

使用 TLP 将 CPU 频率锁定在特定数值（例如 4.7GHz），本质上是强制 CPU 始终运行在最高性能状态，不进行降频。

**⚠️ 警告：**
1.  **散热风险**：锁定 4.7GHz 会导致 CPU 即使在空闲时也会产生大量热量，风扇可能会狂转。
2.  **物理限制**：4.7GHz 通常是**睿频 (Turbo Boost)** 频率。如果散热跟不上，或者达到功耗墙，硬件机制会强制降频（Thermal Throttling），无论软件怎么设置都无法抗拒。

如果确定要这么做，请按照以下步骤操作：

### 第一步：确认你的 CPU 支持的频率

在配置之前，需要确认 4.7GHz 是有效的频率，并且知道具体的数值单位（通常是 kHz）。

1.  打开终端，输入以下命令查看 TLP 检测到的 CPU 数据：
    ```bash
    sudo tlp-stat -p
    ```
2.  查看输出中的 **`/sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies`**（如果存在）或 **`scaling_max_freq`**。
3.  确认 4700000 (kHz) 是否在支持范围内。如果你的 CPU 最大只能到 4.5GHz，强行设 4.7GHz 是无效的。

### 第二步：修改 TLP 配置文件

我们需要修改 `/etc/tlp.conf` 文件。

1.  使用文本编辑器打开配置：
    ```bash
    sudo nano /etc/tlp.conf
    ```

2.  找到以下几项设置，**去掉前面的 `#` 号（取消注释）**，并修改数值。
    *注意：TLP 分为 AC（接电源）和 BAT（用电池）。通常你只会在**接电源 (AC)** 时锁定高频。*

    **A. 设置调度器为性能模式 (Performance)**
    这是最关键的一步，告诉内核不要省电。
    ```conf
    CPU_SCALING_GOVERNOR_ON_AC=performance
    ```

    **B. 锁定最小和最大频率**
    将最小值和最大值都设为 4.7GHz（单位是 kHz，所以是 4700000）。
    *注意：如果你的 CPU 实际上达不到 4.7G，请填入你查到的最大物理频率。*
    ```conf
    CPU_SCALING_MIN_FREQ_ON_AC=4700000
    CPU_SCALING_MAX_FREQ_ON_AC=4700000
    ```

    **C. 设置能量性能偏好 (EPP)**
    对于现代 Intel/AMD CPU，这项设置比 Governor 更重要。
    ```conf
    CPU_ENERGY_PERF_POLICY_ON_AC=performance
    ```

    **D. 确保睿频开启**
    如果 4.7GHz 属于睿频范围，必须确保 Boost 是开启的。
    ```conf
    CPU_BOOST_ON_AC=1
    ```

3.  按下 `Ctrl + O` 保存，按下 `Enter` 确认，然后 `Ctrl + X` 退出编辑器。

### 第三步：应用更改并验证

1.  **应用更改**（无需重启电脑）：
    ```bash
    sudo tlp start
    ```

2.  **验证是否生效**：
    你可以使用 `watch` 命令实时查看当前 CPU 频率：
    ```bash
    watch -n 1 "grep \"^[c]pu MHz\" /proc/cpuinfo"
    ```
    或者使用更直观的工具（如果你安装了 `s-tui`）：
    ```bash
    s-tui
    ```

### 常见问题与排错

*   **如果频率依然在跳动**：
    现代 CPU（特别是 Intel 10代以后）使用 `intel_pstate` 驱动，它对频率的控制权很大。如果设置了 `performance` 偏好，它会自动尽可能维持高频，但如果**没有任何负载**，它可能依然会稍微降频以保护电路。
*   **如果频率卡在基准频率（例如 2.8GHz）上不去**：
    检查散热。如果 CPU 温度过高，BIOS 会强制锁频。
*   **如何恢复默认？**
    再次编辑配置文件，把上述修改的行前面加回 `#`，或者将值改回 `balance_performance`，然后运行 `sudo tlp start`。

**建议：**
比起硬锁 `MIN_FREQ=4700000`，更好的做法通常是只设置 `GOVERNOR=performance` 和 `EPP=performance`。这样 CPU 会极快地响应负载升到 4.7GHz，但在完全无事可做时稍微休息一下，这对硬件寿命更好。

## 电源模式不见了

省流：装了 TLP 是这样的。

在 Kubuntu (KDE Plasma) 中，电源模式（省电、平衡、性能）的切换选项通常依赖于一个名为 **`power-profiles-daemon`** 的后台服务。

Linux 上有一个非常流行的电源管理工具叫 **TLP**。如果你手动安装了它，或者系统默认包含了它，**TLP 会自动禁用 `power-profiles-daemon`**，以此避免两个电源管理程序互相打架。

*   **现象**：KDE 电源图标里的滑块不见了，因为 TLP 接管了所有设置。
*   **解决方法**：你需要在一个“有界面滑块但控制较少”和“无界面但自动化程度高（TLP）”之间做选择。

**如果你想要回 KDE 的电源模式滑块，你需要卸载或禁用 TLP：**

1.  打开终端 (Konsole)。
2.  输入以下命令卸载 TLP：
    ```bash
    sudo apt remove tlp tlp-rdw
    ```
3.  重新启用 `power-profiles-daemon`（见方法二）。
4.  重启电脑。

## QQ 9 更改存储位置

好像改不了，只能把原来的聊天记录复制过来。
具体来说，把原来 Windows 上以 QQ 号命名的文件夹里的 `nt_qq` 文件夹里的东西，复制到 `~/.config/QQ/nt_qq_一坨你的UUID`。

## 微信 4 打不开

我记得是缺一个依赖，具体是啥我也忘了（

## 键盘的 F 键指向功能键

**临时修改（重启后失效）:**
```bash
# 设置为 Mac 模式（媒体键优先）
echo 1 > /sys/module/hid_apple/parameters/fnmode

# 设置为 PC 模式（F键优先）
echo 2 > /sys/module/hid_apple/parameters/fnmode
```

**永久修改:**
你需要创建一个 modprobe 配置文件。
1. 新建文件: `nano /etc/modprobe.d/hid_apple.conf`
2. 添加以下内容:
   ```bash
   options hid_apple fnmode=1
   ```
   *(将 1 改为 2 即为强制 F 键优先)*
3. 保存并重启，或者重新加载内核模块:
   ```bash
   update-initramfs -u
   ```

## 启动 HMCL 时应用缩放

在启动命令中加入 `-Dglass.gtk.uiScale=1.5` 参数。
参考资料：https://github.com/HMCL-dev/HMCL/discussions/3151

## 使用 NVIDIA 显卡启动 Minecraft

这是一个非常经典的需求。在 Linux 笔记本（混合显卡）上，为了省电，默认情况下应用程序（包括 Java/Minecraft）都会使用核显（Intel/AMD iGPU）运行。

我们需要显式地告诉系统：“喂，启动这个游戏的时候，把渲染任务交给 NVIDIA 独显去做！”

这主要通过 **NVIDIA Prime Render Offload** 技术来实现。既然你已经安装了 `nvidia-driver-535`，这个功能是开箱即用的。

请按照以下步骤操作，最稳妥且方便：

### 第一步：验证显卡是否准备就绪

先确认 N 卡已经正常工作。在终端输入：
```bash
nvidia-smi
```
如果能看到显卡列表，说明驱动没问题。

---

### 第二步：创建一个“独显启动脚本” (prime-run)

为了方便以后任何软件（不只是 HMCL）都能一键调用独显，我们先创建一个通用的命令 `prime-run`。

1.  **打开终端，创建脚本文件：**
    ```bash
    sudo nano /usr/bin/prime-run
    ```

2.  **在里面粘贴以下内容：**
    ```bash
    #!/bin/bash
    export __NV_PRIME_RENDER_OFFLOAD=1
    export __GLX_VENDOR_LIBRARY_NAME=nvidia
    exec "$@"
    ```
    *(这段代码的意思是：设置好 NVIDIA 相关的环境变量，然后执行后面跟着的命令)*

3.  **保存并退出：**
    *   按 `Ctrl + O` 回车保存。
    *   按 `Ctrl + X` 退出。

4.  **赋予执行权限：**
    ```bash
    sudo chmod +x /usr/bin/prime-run
    ```

**测试一下：**
输入 `prime-run glxinfo | grep "OpenGL renderer"`。
如果输出里有 **NVIDIA** 字样，说明这个命令成功了！

---

### 第三步：在 HMCL 中设置

现在我们只需要告诉 HMCL，启动 Java 的时候要在前面加个 `prime-run`。

1.  打开 **HMCL 启动器**。
2.  进入 **“设置” (Settings)** -> **“全局游戏设置” (Global Game Settings)**（或者你可以针对某个特定整合包单独设置）。
3.  找到 **“命令包装” (Wrapper Command)** 这一栏（有些版本叫“启动器包装”或类似的）。
4.  在输入框里填入：
    ```text
    prime-run
    ```
5.  **关闭设置**。

---

### 第四步：进游戏验证

1.  通过 HMCL 启动 Minecraft。
2.  进入游戏世界后，按下 **`F3`** 键打开调试界面。
3.  看屏幕 **右侧** 的信息栏，找到 **Display** 这一行。
4.  **如果成功**：你应该能看到类似 `NVIDIA GeForce RTX 3060...` 的字样。
5.  **如果失败**：它显示的依然是 `Intel UHD Graphics` 或 `AMD Radeon`。
